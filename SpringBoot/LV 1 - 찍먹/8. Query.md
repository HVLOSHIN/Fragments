---
tags:
  - fragment
  - spring
text: "[[Spring]]"
---
# 사전세팅

JPA 로깅, JDBC URL 고정 등등을 했다.

```properties
spring.application.name=firstproject  
server.servlet.encoding.force=true  
spring.h2.console.enabled=true  
spring.jpa.defer-datasource-initialization=false  
  
# JPA 로깅 설정  
# 디버그 레벨로 쿼리 출력  
logging.level.org.hibernate.SQL=DEBUG  
  
# 쿼리 줄바꿈 하기  
spring.jpa.properties.hibernate.format_sql=true  
  
# 매개변수 값 보여주기  
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE  
  
# jdbc 고정 URL 설정하기  
spring.datasource.url=jdbc:h2:mem:testdb
```

사람마다 주민등록 번호가 겹치면 안되는것 처럼 **DB의 id 값 역시 중복되면 안된다**.\
테이블에 저장된 각 데이터를 유일하게 구분할 수 있도록 지적한 속성을 **기본키(primary key)**라고 한다.

```java
package com.example.firstproject.entity;  
  
import jakarta.persistence.*;  
import lombok.AllArgsConstructor;  
import lombok.Getter;  
import lombok.NoArgsConstructor;  
import lombok.ToString;  
  
@AllArgsConstructor  
@NoArgsConstructor  
@ToString  
@Getter  
@Entity             // 엔티티 선언  
public class Article {  
    @Id             // 엔티티의 대푯값 지정  
    @GeneratedValue(strategy = GenerationType.IDENTITY) // Id의 숫자가 자동으로 매겨짐  
    private Long id;  
  
    @Column         // 행 추가 할때 쓰는 어노테이션  
    private String title; // DB의 title과 매칭할거임  
    @Column  
    private String content; //DB의 content와 매칭할거임  
  
}
```

@GenerateValue 어노테이션에 DB가 알아서 id를 넣을수 있도록 **자동 생성 전략 기능**을 추가했다.

```java
@GeneratedValue(strategy = GenerationType.IDENTITY)
```

# spring boot 에서 쿼리는 어떻게 동작하는가

```java
@AllArgsConstructor  
@NoArgsConstructor  
@ToString  
@Getter  
@Entity             // 엔티티 선언  
public class Article {  
    @Id             // 엔티티의 대푯값 지정  
    @GeneratedValue(strategy = GenerationType.IDENTITY) // Id의 숫자가 자동으로 매겨짐  
    private Long id;  
  
    @Column         // 행 추가 할때 쓰는 어노테이션  
    private String title; // DB의 title과 매칭할거임  
    @Column  
    private String content; //DB의 content와 매칭할거임  
  
}
```

엔티티 코드를 좀더 설명을 해보자면

- `@Entity` : DB가 해당 객체를 인식하도록 붙인 것.
- 서버를 실행하면 Article 객체가 만들어지면서 `CREATE TABLE` 도 자동으로 수행된다.\
  (실제 로그)

```
create table article (
	id bigint generated by default as identity,
	content varchar(255),
	title varchar(255),
	primary key (id)
)
```

쿼리, 데이터베이스, SQL 은 별도 카테고리에서 더 심도있게 다룰것이다.