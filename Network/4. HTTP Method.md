---
tags:
  - network
  - fragment
text: "[[Network]]"
---
# URL - 리소스 식별
회원 정보 관리 API를 만든다고 가정해보자.
요구사항
- 회원 등록, 조회, 수정, 삭제

##### 별로 좋지 않은 예시
- 회원 목록 조회 / read-member-list
- 회원 조회 / read-member-by-id
- 회원 등록 / create-member
- 회원 수정 / update-member
- 회원 삭제 / delete-member

URI 의 뜻을 다시 복습해 보자
Uniform **Resource Identifier** (리소스 식별)

##### 그렇다면 리소스란게 무엇인가?
- 회원을 등록, 수정, 조회 하는것이 리소스가 아니다.
- ex) 미네랄을 캐라 -> 미네랄이 리소스
- 회원이라는 개념 자체가 리소스

##### 리소스를 어떻게 식별하면 좋을까?
- 회원이라는 리소스만 식별하면 된다. -> 회원 리소스를 URI 에 매핑
- 가장 중요한 리소스 말고는 배제

##### 괜찮은 예시
계층 구조상 상위를 컬렉션으로 보고 복수단어 사용 권장
- 회원 목록 조회 / members
- 회원 조회 / members / {id}
- 회원 등록 / members / {id}
- 회원 수정 / members / {id}
- 회원 삭제 / members / {id}
너무 배제를 했더니 이번에는 기능들 간 구분이 힘들어 졌다.

##### 리소스와 행위를 분리
가장 중요한 것은 리소스를 식별하는 것

- URI는 리소스만 식별하게 한다.
- 리소스와 리소스를 대상으로 하는 행위를 분리
	- 리소스 : 회원 (명사)
	- 행위 : 조회, 등록, 삭제, 변경 (동사)
- 행위는 HTTP 메서드로 구분하면 된다.

# HTTP Method
## GET 
- 주세요
- 리소스 **조회**
- 서버에 전달하고 싶은 데이터는 쿼리를 통해서 전달
- 메시지 바디를 사용해서 데이터를 전달할 수는 있음 (권장은 안함)
[[4. Read#단일 데이터 조회|GET]]
![[0/Excalidraw/Spring HTTP.md#^group=4662yKt1zBX1lqp-gnvvN|1000]]
## POST

- 처리해주세요 (**등록해주세요**가 더 직관적인듯) 
- 신규 리소스 등록, 프로세스 처리
![[0/Excalidraw/Spring HTTP.md#^group=7uwFKGju_YB_DaSkqcGii|1000]]

### POST의 정확한 의미
POST가 꼭 등록만을 의미하는 것은 아니다.
POST 메서드는 대상 리소스의 의미 **체계에 따라** **표현을 처리**하도록 요청 (말이 좀 어려운데, 표준스펙임)

새로운 리소스 생성, 데이터 처리 등등
애매하면 POST 라는 말이 있다. ㅋㅋㅋ

## PUT 
- 덮어써 주세요
- 리소스가 있으면 대체, 없으면 생성.
- POST 에서는 클라이언트가 리소스의 정확한 위치는 알지 못한다. (아직 처리되지 않았으니까)
  PUT은 클라이언트가 구체적으로 URL을 지정해 준다.
![[0/Excalidraw/Spring HTTP.md#^group=b8u-KxbJPfKuCJYbJAWFr|1000]]
없는 필드는 아예 날려버린다.
PUT은 수정보다는 **갈아치운다**는 뉘앙스가 더 강하다.

## PATCH
- 수정해주세요
- 부분적 수정의 뉘앙스가 강하다.
![[0/Excalidraw/Spring HTTP.md#^group=PVG2ad9frURivXC468E6L|1000]]
정확히 요구사항만 반영해준다.
PATCH 메서드가 호환이 안되는 경우가 있는데, 그럴경우 POST를 사용할 수 있다.
POST는 무적이다

## DELETE
- 없애주세요
![[0/Excalidraw/Spring HTTP.md#^group=no5-oHWYhapZezBmbZEy1|1000]]

그림들만 잘 봐도 복습할때 편할 것이다


## HTTP 메서드의 속성

### 안전
safe
- 호출해도 리소스를 변경하지 않는다.
- GET같은 메서드는 조회만 할 뿐이지, 뭘 바꾸지 않는다.
- 잦은 호출로 로그가 쌓여 생기는 장애 같은것은 고려하지 않는다. (리소스 자체에만 집중)

### 멱등
Idempotent
- 한번 호출하든지, 100번 호출하든지 결과가 같아야 한다.
- GET : 당연히 차이 없죠
- DELETE : 한번 지우나 100번 지우나 뭐 없어지는건 똑같다
- PUT : 완전히 덮어쓰기 때문에  결과는 항상 같다.
- **POST** : POST는 멱등이 아니다. 두번 호출하면 같은 결제가 중복해서 발생할 수 있다.
   결제를 두번 누른다면? ㅋㅋㅋ

### 캐시가능
Cacheable
캐시 뜻 알쥬? 너무 큰 리소스는 클라이언트 로컬 쪽에 저장해 놓는것
- 실질적으로는 GET, HEAD 정도만 캐시로 사용한다.
- POST, PATCH 도 가능은 한데, 본문 내용까지 고려해야 해서 구현이 쉽지 않다.

![[CleanShot 2024-07-17 at 11.14.07@2x.png|500]]

# HTTP 메서드 활용

#### 1. 정적 데이터 조회
- 이미지, 정적 텍스트 문서
- GET 사용
- 일반적으로 쿼리 파라미터 없이 리소스 경로로 단순하게 조회 가능
#### 2. 동적 데이터 조회
- 검색, 게시판 목록에서 정렬 필터
- GET + 쿼리 사용
- 서버 측에서 정렬, 조회를 해줘야 하기 때문에 (동적생성) 클라이언트 측에서 쿼리를 보내줘야 한다.
#### 3. HTML form 데이터 전송
![[0/Excalidraw/Spring HTTP.md#^group=bRiKOI_NS5NuWyiMwSiqT|900]]
![[CleanShot 2024-07-17 at 13.34.58@2x.png]]

#### 4. HTTP API 데이터 전송
![[CleanShot 2024-07-17 at 13.39.41@2x.png|500]]
이부분은 좀 어려운데 복습하기


# API 설계
추후에 다시 복습
